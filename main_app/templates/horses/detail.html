{% extends 'base.html' %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="{% static 'css/horses/horse_detail.css' %}" />    
{% endblock head %}

{% block content %}
<section>
    <div>
        <!-- <img src="{% static 'images/' %}" alt=""> -->
    </div>
    <div>
        <h1>{{ horse.name }}</h1>
        
        {% if horse.age > 0 %}
            <h2>A {{ horse.age }} year old {{ horse.breed }} </h2>
        {% else %}
            <h2>A {{ horse.breed }} foal. </h2>
        {% endif %}
        <p> {{ horse.description }} </p>
        <div>
            <a href="{% url 'horse-update' horse.id %}" class="btn warn">Edit</a>
            <a href="{% url 'horse-delete' horse.id %}" class="btn danger">Delete</a>
        </div>
    </div>
</section>

<div class="feedings-trainings-container">
    <section class="feedings">
        <div class="subsection-title">
            <h2>Feedings</h2>
            <!-- <img src="" alt=""> -->
        </div>

        <h3>Add a Feeding</h3>
        <form action="{% url 'add-feeding' horse.id %}" method="post" class="subsection-content" autocomplete="off">
            {% csrf_token %}
            {{ feeding_form.as_p }}
            <button type="submit" class="btn submit">Add Feeding</button>
    </form>
    <h3>Past Feedings</h3>
    
    {% if horse.feeding_set.all.count %}
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>Time</th>
                <th>Gain Type</th>
            </tr>
        </thead>
        <tbody>
            {% for feeding in horse.feeding_set.all %}
            <tr>
                <td>{{ feeding.date }}</td>
                <td>{{ feeding.get_time_display }}</td>
                <td>{{ feeding.get_grain_type_display }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="subsection-content">
        <p>⚠️ {{horse.name}} has not been fed!</p>
    </div>
</section>
</div>
{% endif %}
{% endblock content %}
    